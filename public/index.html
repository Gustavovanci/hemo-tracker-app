<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- T√≠tulo e Metadados do PWA -->
    <title>HemoFlow - Sistema Avan√ßado de Analytics Hemodin√¢mico</title>
    <meta name="theme-color" content="#007AFF">
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts Premium -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@100;200;300;400;500;600;700;800;900&family=SF+Pro+Text:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Premium -->
    <link href="output.css" rel="stylesheet">
    
    <!-- Meta tags para SEO -->
    <meta name="description" content="Sistema premium de tracking hemodin√¢mico com analytics preditivos e design Apple-level">
    <meta name="keywords" content="hemodin√¢mica, tracking, healthcare, analytics, premium, Apple design">
    <meta name="author" content="HemoFlow Premium Team">
    
    <!-- Open Graph -->
    <meta property="og:title" content="HemoFlow - Sistema Premium de Tracking Hemodin√¢mico">
    <meta property="og:description" content="Interface premium inspirada na Apple para otimiza√ß√£o de fluxo hemodin√¢mico">
    <meta property="og:type" content="website">
</head>
<body>

    <div class="container mx-auto px-6 py-8 max-w-6xl">
        
        <!-- Hero Header Premium -->
        <header class="hero-header">
            <div class="hero-logo">
                <span class="text-4xl">ü´Ä</span>
            </div>
            <h1 class="hero-title">HemoFlow</h1>
            <p class="hero-subtitle">Sistema Avan√ßado de Analytics Hemodin√¢mico com Interface Premium</p>
            
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-indicator">
                    <div class="status-dot online" id="system-status-dot"></div>
                    <span id="system-status" class="text-white font-medium">Sistema Online</span>
                </div>
                <span id="last-sync" class="text-white/70 text-sm">√öltima sync: --</span>
            </div>
        </header>

        <!-- Scanner Section Premium -->
        <div class="glass-card">
            <div class="scanner-container">
                <div class="scanner-icon">
                    <svg class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7V5C3 3.89543 3.89543 3 5 3H7M17 3H19C20.1046 3 21 3.89543 21 5V7M21 17V19C21 20.1046 20.1046 21 19 21H17M7 21H5C3.89543 21 3 20.1046 3 19V17M12 8V16M8 12H16" />
                    </svg>
                </div>
                
                <h3 class="text-2xl font-bold text-white mb-3">Scanner de Pulseira Inteligente</h3>
                <p class="text-white/80 text-lg mb-8">Escaneie o QR Code ou digite o ID do paciente para iniciar o tracking</p>
                
                <!-- Camera Preview -->
                <div id="reader" class="camera-preview mb-8" style="display: none;">
                    <div id="camera-view"></div>
                </div>
                
                <!-- Scanner Button -->
                <button id="start-scan-btn" class="btn-scan mb-6">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7V5C3 3.89543 3.89543 3 5 3H7M17 3H19C20.1046 3 21 3.89543 21 5V7M21 17V19C21 20.1046 20.1046 21 19 21H17M7 21H5C3.89543 21 3 20.1046 3 19V17M12 8V16M8 12H16" />
                    </svg>
                    Ativar Scanner de Pulseira
                </button>
                
                <!-- Input Manual Premium -->
                <div class="input-manual">
                    <input type="text" id="manual-patient-id" 
                           placeholder="Ou digite o ID do paciente..." 
                           class="form-input">
                    <button id="manual-submit-btn" class="btn-primary">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13L9 17L19 7" />
                        </svg>
                        Confirmar
                    </button>
                </div>
                
                <!-- Status do Scanner -->
                <div id="scanner-status" class="mt-6 text-center text-white/70" style="display: none;">
                    <div class="loading-spinner inline-block mr-3"></div>
                    Inicializando c√¢mera traseira...
                </div>
            </div>
        </div>

        <!-- Patient Info Premium -->
        <div id="patient-info" class="patient-card" style="display: none;">
            <h3 class="text-2xl font-bold text-white mb-4">üë§ Paciente Identificado</h3>
            <div class="patient-id" id="patient-id">AGUARDANDO...</div>
            
            <div class="patient-stats">
                <div class="patient-stat">
                    <div class="patient-stat-label">Hora de Entrada</div>
                    <div class="patient-stat-value" id="entry-time">--:--</div>
                </div>
                <div class="patient-stat">
                    <div class="patient-stat-label">Status Atual</div>
                    <div class="patient-stat-value text-green-400">Em Atendimento</div>
                </div>
            </div>
        </div>

        <!-- Timeline Section Premium -->
        <div class="glass-card" id="timeline-section" style="display: none;">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">‚è±Ô∏è Timeline do Procedimento</h2>
                <div class="liquid-glass rounded-xl px-4 py-2">
                    <span id="current-step" class="text-white font-semibold">Etapa 1/9</span>
                </div>
            </div>
            
            <!-- Progress Bar Premium -->
            <div class="timeline-progress">
                <div class="timeline-progress-bar">
                    <div id="progress-bar" class="timeline-progress-fill" style="width: 0%"></div>
                </div>
                <div class="text-center text-white/80 text-lg mt-3">
                    <span id="progress-text">0% conclu√≠do</span>
                </div>
            </div>
            
            <div class="timeline-container">
                <!-- Etapa 1 -->
                <div class="timeline-step" data-step="1">
                    <div class="step-indicator pending" id="step1">1</div>
                    <div class="step-content">
                        <div class="step-title">üö™ Chegada na Hemodin√¢mica</div>
                        <div class="step-time" id="time1">--:--:--</div>
                        <div class="step-duration" id="duration1"></div>
                    </div>
                </div>

                <!-- Etapa 2 -->
                <div class="timeline-step" data-step="2">
                    <div class="step-indicator pending" id="step2">2</div>
                    <div class="step-content">
                        <div class="step-title">üè• Entrada na Sala</div>
                        <div class="step-time" id="time2">--:--:--</div>
                        <div class="step-duration" id="duration2"></div>
                    </div>
                </div>

                <!-- Etapa 3 -->
                <div class="timeline-step" data-step="3">
                    <div class="step-indicator pending" id="step3">3</div>
                    <div class="step-content">
                        <div class="step-title">üõ°Ô∏è In√≠cio da Cobertura</div>
                        <div class="step-time" id="time3">--:--:--</div>
                        <div class="step-duration" id="duration3"></div>
                    </div>
                </div>

                <!-- Etapa 4 -->
                <div class="timeline-step" data-step="4">
                    <div class="step-indicator pending" id="step4">4</div>
                    <div class="step-content">
                        <div class="step-title">‚úÖ T√©rmino da Cobertura</div>
                        <div class="step-time" id="time4">--:--:--</div>
                        <div class="step-duration" id="duration4"></div>
                    </div>
                </div>

                <!-- Etapa 5 -->
                <div class="timeline-step" data-step="5">
                    <div class="step-indicator pending" id="step5">5</div>
                    <div class="step-content">
                        <div class="step-title">üî¨ In√≠cio do Procedimento</div>
                        <div class="step-time" id="time5">--:--:--</div>
                        <div class="step-duration" id="duration5"></div>
                    </div>
                </div>

                <!-- Etapa 6 -->
                <div class="timeline-step" data-step="6">
                    <div class="step-indicator pending" id="step6">6</div>
                    <div class="step-content">
                        <div class="step-title">‚ú® T√©rmino do Procedimento</div>
                        <div class="step-time" id="time6">--:--:--</div>
                        <div class="step-duration" id="duration6"></div>
                    </div>
                </div>

                <!-- Etapa 7 -->
                <div class="timeline-step" data-step="7">
                    <div class="step-indicator pending" id="step7">7</div>
                    <div class="step-content">
                        <div class="step-title">üö™ Sa√≠da da Sala</div>
                        <div class="step-time" id="time7">--:--:--</div>
                        <div class="step-duration" id="duration7"></div>
                    </div>
                </div>

                <!-- Etapa 8 -->
                <div class="timeline-step" data-step="8">
                    <div class="step-indicator pending" id="step8">8</div>
                    <div class="step-content">
                        <div class="step-title">üßΩ In√≠cio da Limpeza</div>
                        <div class="step-time" id="time8">--:--:--</div>
                        <div class="step-duration" id="duration8"></div>
                    </div>
                </div>

                <!-- Etapa 9 -->
                <div class="timeline-step" data-step="9">
                    <div class="step-indicator pending" id="step9">9</div>
                    <div class="step-content">
                        <div class="step-title">üéØ T√©rmino da Limpeza</div>
                        <div class="step-time" id="time9">--:--:--</div>
                        <div class="step-duration" id="duration9"></div>
                    </div>
                </div>
            </div>

            <!-- Controles Premium -->
            <div class="flex gap-4 mt-8">
                <button class="btn-success flex-1" id="next-step-btn" disabled>
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13L9 17L19 7" />
                    </svg>
                    Pr√≥xima Etapa
                </button>
                <button class="btn-danger" id="reset-btn">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h5M20 20v-5h-5" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 9a9 9 0 0114.53-2.828A8.973 8.973 0 0120 12m-4.53 2.828A9 9 0 015.47 14.828 8.973 8.973 0 014 12" />
                    </svg>
                    Resetar
                </button>
            </div>
        </div>

        <!-- Analytics Premium -->
        <div class="glass-card" id="analytics-section" style="display: none;">
            <h2 class="text-3xl font-bold text-white mb-8">ü§ñ Analytics Preditivos</h2>
            
            <div class="analytics-grid">
                <!-- Previs√£o de Tempo -->
                <div class="analytics-card">
                    <div class="analytics-icon">‚è∞</div>
                    <h4 class="analytics-title">Previs√£o de Conclus√£o</h4>
                    <p class="analytics-subtitle">Baseado em machine learning</p>
                    <div class="analytics-value" id="predicted-completion">--:--</div>
                </div>
                
                <!-- Status de Performance -->
                <div class="analytics-card">
                    <div class="analytics-icon">üìä</div>
                    <h4 class="analytics-title">Performance em Tempo Real</h4>
                    <p class="analytics-subtitle">vs. m√©dia hist√≥rica</p>
                    <div class="analytics-value" id="performance-status">
                        <span class="text-green-400">‚úì Excelente</span>
                    </div>
                </div>
            </div>
            
            <!-- Alertas Inteligentes -->
            <div class="alerts-container" id="smart-alerts">
                <!-- Os alertas ser√£o inseridos dinamicamente aqui -->
            </div>
        </div>

        <!-- Stats Dashboard Premium -->
        <div class="glass-card" id="stats-section" style="display: none;">
            <h2 class="text-3xl font-bold text-white mb-8">üìä M√©tricas Avan√ßadas</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-label">Tempo Total</div>
                    <div class="stat-value" id="total-time">--</div>
                    <div class="stat-comparison" id="total-time-comparison">vs. m√©dia: --</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üî¨</div>
                    <div class="stat-label">Procedimento</div>
                    <div class="stat-value" id="procedure-time">--</div>
                    <div class="stat-comparison" id="procedure-time-comparison">vs. m√©dia: --</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚öôÔ∏è</div>
                    <div class="stat-label">Prepara√ß√£o</div>
                    <div class="stat-value" id="setup-time">--</div>
                    <div class="stat-comparison" id="setup-time-comparison">vs. m√©dia: --</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üßΩ</div>
                    <div class="stat-label">Limpeza</div>
                    <div class="stat-value" id="cleaning-time">--</div>
                    <div class="stat-comparison" id="cleaning-time-comparison">vs. m√©dia: --</div>
                </div>
            </div>
        </div>

        <!-- Final Actions Premium -->
        <div class="glass-card" id="final-section" style="display: none;">
            <h2 class="text-3xl font-bold text-white mb-8">‚úÖ Finalizar Atendimento</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <!-- Sele√ß√£o de Sala -->
                <div class="form-group">
                    <label for="sala-select" class="form-label">üè• Sala de Procedimento</label>
                    <select id="sala-select" class="form-select">
                        <option value="">Selecione a sala...</option>
                        <option value="Sala 1">Sala 1 - Hemodin√¢mica Principal</option>
                        <option value="Sala 2">Sala 2 - Cardiologia Intervencionista</option>
                        <option value="Sala 3">Sala 3 - Neurologia Intervencionista</option>
                        <option value="Sala 4">Sala 4 - Radiologia Intervencionista</option>
                        <option value="Sala 5">Sala 5 - Emerg√™ncia</option>
                    </select>
                </div>
                
                <!-- Destino do Paciente -->
                <div class="form-group">
                    <label for="leito-select" class="form-label">üèÉ‚Äç‚ôÇÔ∏è Destino do Paciente</label>
                    <select id="leito-select" class="form-select">
                        <option value="">Selecione o destino...</option>
                        <option value="Recupera√ß√£o 1">Recupera√ß√£o 1</option>
                        <option value="Recupera√ß√£o 2">Recupera√ß√£o 2</option>
                        <option value="UTI Cardiol√≥gica">UTI Cardiol√≥gica</option>
                        <option value="UTI Geral">UTI Geral</option>
                        <option value="Apartamento">Apartamento</option>
                        <option value="Enfermaria">Enfermaria</option>
                        <option value="Alta Hospitalar">Alta Hospitalar</option>
                    </select>
                </div>
            </div>
            
            <!-- Observa√ß√µes -->
            <div class="form-group">
                <label for="observations" class="form-label">üìù Observa√ß√µes Cl√≠nicas</label>
                <textarea id="observations" 
                          placeholder="Observa√ß√µes sobre o procedimento, complica√ß√µes, ou notas especiais..."
                          class="form-textarea"></textarea>
            </div>
            
            <!-- Resumo Final Premium -->
            <div class="liquid-glass rounded-2xl p-6 mb-8">
                <h3 class="text-xl font-bold text-white mb-4">üìã Resumo do Atendimento</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="flex justify-between">
                        <span class="text-white/70">Paciente:</span>
                        <span class="text-white font-semibold" id="final-patient-id">--</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-white/70">Dura√ß√£o Total:</span>
                        <span class="text-white font-semibold" id="final-total-time">--</span>
                    </div>
                </div>
            </div>
            
            <!-- Bot√£o de Salvar Premium -->
            <button class="btn-primary w-full" id="checkout-btn" disabled>
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20 6L9 17L4 12" />
                </svg>
                Salvar no Google Sheets & Gerar Relat√≥rio
            </button>
            
            <!-- Status de Salvamento -->
            <div id="save-status" class="text-center text-white/70 text-lg mt-6" style="display: none;">
                <div class="loading-spinner inline-block mr-3"></div>
                Salvando dados no sistema...
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container">
            <!-- Notifica√ß√µes ser√£o inseridas aqui dinamicamente -->
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registrado:', registration);
                    })
                    .catch(error => {
                        console.log('SW falhou:', error);
                    });
            });
        }
    </script>
</body>
</html>