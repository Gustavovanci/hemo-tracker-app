<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>HemoFlow Revolutionary - Sistema Step-by-Step</title>
    <meta name="theme-color" content="#007AFF">
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts Premium -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@100;200;300;400;500;600;700;800;900&family=SF+Pro+Text:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Revolutionary -->
    <link href="output.css" rel="stylesheet">
    
    <meta name="description" content="Interface revolucion√°ria step-by-step para tracking hemodin√¢mico">
</head>
<body>

    <!-- Progress Indicator -->
    <div class="progress-indicator">
        <div class="progress-circle">
            <span id="current-step-indicator">1</span>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- STEP 0: Welcome Screen -->
    <div id="step-welcome" class="step-container">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">ü´Ä</div>
                <h1 class="step-title">HemoFlow</h1>
                <p class="step-subtitle">Sistema Revolucion√°rio de Tracking Hemodin√¢mico</p>
            </div>
            
            <div class="status-message">
                <div class="status-icon" id="system-status-icon">üü¢</div>
                <div class="status-text" id="system-status-text">Sistema Online e Pronto</div>
            </div>
            
            <button id="start-btn" class="btn-revolutionary btn-primary">
                <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
                Iniciar Novo Atendimento
            </button>
        </div>
    </div>

    <!-- STEP 1: Patient Scanner -->
    <div id="step-scanner" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">1</div>
                <h2 class="step-title">Identificar Paciente</h2>
                <p class="step-subtitle">Escaneie a pulseira ou digite o ID</p>
            </div>
            
            <div class="scanner-interface">
                <div class="scanner-icon">
                    <svg class="w-16 h-16 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7V5C3 3.89543 3.89543 3 5 3H7M17 3H19C20.1046 3 21 3.89543 21 5V7M21 17V19C21 20.1046 20.1046 21 19 21H17M7 21H5C3.89543 21 3 20.1046 3 19V17M12 8V16M8 12H16" />
                    </svg>
                </div>
                
                <!-- Camera Preview -->
                <div id="reader" class="camera-preview" style="display: none;"></div>
                
                <!-- Scanner Button -->
                <button id="scan-btn" class="btn-revolutionary btn-primary mb-8">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7V5C3 3.89543 3.89543 3 5 3H7M17 3H19C20.1046 3 21 3.89543 21 5V7M21 17V19C21 20.1046 20.1046 21 19 21H17M7 21H5C3.89543 21 3 20.1046 3 19V17M12 8V16M8 12H16" />
                    </svg>
                    Ativar Scanner
                </button>
                
                <!-- Manual Input -->
                <div class="input-group">
                    <label class="input-label">Ou digite o ID do paciente:</label>
                    <input type="text" 
                           id="patient-id-input" 
                           class="input-field" 
                           placeholder="Ex: PAC001" 
                           maxlength="20">
                </div>
                
                <div class="input-buttons">
                    <button id="manual-submit-btn" class="btn-revolutionary btn-success flex-1">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13L9 17L19 7" />
                        </svg>
                        Confirmar ID
                    </button>
                </div>
                
                <!-- Scanner Status -->
                <div id="scanner-status" class="status-message mt-6" style="display: none;">
                    <div class="status-icon">üì∑</div>
                    <div class="status-text">C√¢mera inicializando...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- STEP 2: Patient Confirmed -->
    <div id="step-patient" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">‚úì</div>
                <h2 class="step-title">Paciente Identificado</h2>
                <p class="step-subtitle">Pronto para iniciar o tracking</p>
            </div>
            
            <div class="patient-showcase">
                <div class="patient-id-display" id="patient-id-display">PAC001</div>
                
                <div class="patient-stats">
                    <div class="patient-stat">
                        <div class="patient-stat-label">Hora de Entrada</div>
                        <div class="patient-stat-value" id="entry-time">--:--</div>
                    </div>
                    <div class="patient-stat">
                        <div class="patient-stat-label">Status</div>
                        <div class="patient-stat-value text-green-400">Iniciando</div>
                    </div>
                </div>
            </div>
            
            <button id="start-timeline-btn" class="btn-revolutionary btn-primary mt-8">
                <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Iniciar Timeline
            </button>
        </div>
    </div>

    <!-- STEP 3: Timeline Step 1 - Chegada na Hemodin√¢mica -->
    <div id="step-timeline-1" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">3</div>
                <h2 class="step-title">Chegada na Hemodin√¢mica</h2>
                <p class="step-subtitle">Marque quando o paciente chegar</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üö™</div>
                <h3 class="timeline-step-title">Chegada na Hemodin√¢mica</h3>
                <p class="timeline-step-description">Paciente chegou ao setor de hemodin√¢mica</p>
                
                <div class="timeline-step-time" id="time-1">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-1" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar Chegada
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 4: Timeline Step 2 - Entrada na Sala -->
    <div id="step-timeline-2" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">4</div>
                <h2 class="step-title">Entrada na Sala</h2>
                <p class="step-subtitle">Paciente entrou na sala de procedimento</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üè•</div>
                <h3 class="timeline-step-title">Entrada na Sala</h3>
                <p class="timeline-step-description">Paciente foi direcionado para a sala</p>
                
                <div class="timeline-step-time" id="time-2">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-2" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar Entrada na Sala
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 5: Timeline Step 3 - In√≠cio da Cobertura -->
    <div id="step-timeline-3" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">5</div>
                <h2 class="step-title">In√≠cio da Cobertura</h2>
                <p class="step-subtitle">Prepara√ß√£o e cobertura iniciada</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üõ°Ô∏è</div>
                <h3 class="timeline-step-title">In√≠cio da Cobertura</h3>
                <p class="timeline-step-description">Equipe iniciou prepara√ß√£o e cobertura</p>
                
                <div class="timeline-step-time" id="time-3">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-3" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar In√≠cio da Cobertura
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 6: Timeline Step 4 - T√©rmino da Cobertura -->
    <div id="step-timeline-4" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">6</div>
                <h2 class="step-title">T√©rmino da Cobertura</h2>
                <p class="step-subtitle">Cobertura finalizada</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">‚úÖ</div>
                <h3 class="timeline-step-title">T√©rmino da Cobertura</h3>
                <p class="timeline-step-description">Prepara√ß√£o e cobertura conclu√≠das</p>
                
                <div class="timeline-step-time" id="time-4">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-4" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar T√©rmino da Cobertura
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 7: Timeline Step 5 - In√≠cio do Procedimento -->
    <div id="step-timeline-5" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">7</div>
                <h2 class="step-title">In√≠cio do Procedimento</h2>
                <p class="step-subtitle">Procedimento principal iniciado</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üî¨</div>
                <h3 class="timeline-step-title">In√≠cio do Procedimento</h3>
                <p class="timeline-step-description">Procedimento hemodin√¢mico principal</p>
                
                <div class="timeline-step-time" id="time-5">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-5" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar In√≠cio do Procedimento
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 8: Timeline Step 6 - T√©rmino do Procedimento -->
    <div id="step-timeline-6" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">8</div>
                <h2 class="step-title">T√©rmino do Procedimento</h2>
                <p class="step-subtitle">Procedimento conclu√≠do com sucesso</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">‚ú®</div>
                <h3 class="timeline-step-title">T√©rmino do Procedimento</h3>
                <p class="timeline-step-description">Procedimento hemodin√¢mico finalizado</p>
                
                <div class="timeline-step-time" id="time-6">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-6" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar T√©rmino do Procedimento
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 9: Timeline Step 7 - Sa√≠da da Sala -->
    <div id="step-timeline-7" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">9</div>
                <h2 class="step-title">Sa√≠da da Sala</h2>
                <p class="step-subtitle">Paciente deixou a sala</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üö™</div>
                <h3 class="timeline-step-title">Sa√≠da da Sala</h3>
                <p class="timeline-step-description">Paciente foi retirado da sala</p>
                
                <div class="timeline-step-time" id="time-7">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-7" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar Sa√≠da da Sala
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 10: Timeline Step 8 - In√≠cio da Limpeza -->
    <div id="step-timeline-8" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">10</div>
                <h2 class="step-title">In√≠cio da Limpeza</h2>
                <p class="step-subtitle">Limpeza da sala iniciada</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üßΩ</div>
                <h3 class="timeline-step-title">In√≠cio da Limpeza</h3>
                <p class="timeline-step-description">Equipe iniciou limpeza da sala</p>
                
                <div class="timeline-step-time" id="time-8">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-8" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar In√≠cio da Limpeza
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 11: Timeline Step 9 - T√©rmino da Limpeza -->
    <div id="step-timeline-9" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">11</div>
                <h2 class="step-title">T√©rmino da Limpeza</h2>
                <p class="step-subtitle">Limpeza conclu√≠da</p>
            </div>
            
            <div class="timeline-step-card">
                <div class="timeline-step-icon">üéØ</div>
                <h3 class="timeline-step-title">T√©rmino da Limpeza</h3>
                <p class="timeline-step-description">Sala limpa e pronta para pr√≥ximo paciente</p>
                
                <div class="timeline-step-time" id="time-9">
                    Aguardando marca√ß√£o...
                </div>
                
                <button id="mark-step-9" class="btn-revolutionary btn-success">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Marcar T√©rmino da Limpeza
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 12: Final Form -->
    <div id="step-final" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">üìã</div>
                <h2 class="step-title">Finalizar Atendimento</h2>
                <p class="step-subtitle">Complete as informa√ß√µes finais</p>
            </div>
            
            <div class="final-form">
                <div class="form-section">
                    <h3 class="form-title">üè• Informa√ß√µes da Sala</h3>
                    <select id="sala-select" class="form-select">
                        <option value="">Selecione a sala...</option>
                        <option value="Sala 1">Sala 1 - Hemodin√¢mica Principal</option>
                        <option value="Sala 2">Sala 2 - Cardiologia Intervencionista</option>
                        <option value="Sala 3">Sala 3 - Neurologia Intervencionista</option>
                        <option value="Sala 4">Sala 4 - Radiologia Intervencionista</option>
                        <option value="Sala 5">Sala 5 - Emerg√™ncia</option>
                    </select>
                </div>
                
                <div class="form-section">
                    <h3 class="form-title">üèÉ‚Äç‚ôÇÔ∏è Destino do Paciente</h3>
                    <select id="leito-select" class="form-select">
                        <option value="">Selecione o destino...</option>
                        <option value="Recupera√ß√£o 1">Recupera√ß√£o 1</option>
                        <option value="Recupera√ß√£o 2">Recupera√ß√£o 2</option>
                        <option value="UTI Cardiol√≥gica">UTI Cardiol√≥gica</option>
                        <option value="UTI Geral">UTI Geral</option>
                        <option value="Apartamento">Apartamento</option>
                        <option value="Enfermaria">Enfermaria</option>
                        <option value="Alta Hospitalar">Alta Hospitalar</option>
                    </select>
                </div>
                
                <div class="form-section">
                    <h3 class="form-title">üìù Observa√ß√µes Cl√≠nicas</h3>
                    <textarea id="observations" 
                              class="form-textarea" 
                              placeholder="Observa√ß√µes sobre o procedimento, complica√ß√µes, ou notas especiais..."></textarea>
                </div>
                
                <div class="summary-card">
                    <h3 class="summary-title">üìä Resumo do Atendimento</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">Paciente:</span>
                            <span class="summary-value" id="final-patient-id">--</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Dura√ß√£o Total:</span>
                            <span class="summary-value" id="final-total-time">--</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">In√≠cio:</span>
                            <span class="summary-value" id="final-start-time">--</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">T√©rmino:</span>
                            <span class="summary-value" id="final-end-time">--</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="save-btn" class="btn-revolutionary btn-primary" disabled>
                <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20 6L9 17L4 12" />
                </svg>
                Salvar no Google Sheets
            </button>
        </div>
    </div>

    <!-- STEP 13: Success -->
    <div id="step-success" class="step-container" style="display: none;">
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">‚úÖ</div>
                <h2 class="step-title">Atendimento Conclu√≠do!</h2>
                <p class="step-subtitle">Dados salvos com sucesso</p>
            </div>
            
            <div class="status-message">
                <div class="status-icon">üéâ</div>
                <div class="status-text">Todos os dados foram salvos no Google Sheets</div>
            </div>
            
            <div class="input-buttons">
                <button id="new-patient-btn" class="btn-revolutionary btn-primary flex-1">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                    </svg>
                    Novo Paciente
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('SW registrado:', registration))
                    .catch(error => console.log('SW falhou:', error));
            });
        }
    </script>
</body>
</html>